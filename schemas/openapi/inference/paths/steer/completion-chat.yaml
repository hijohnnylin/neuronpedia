post:
  summary: For a given prompt, complete it by steering with the given feature or vector
  requestBody:
    required: true
    content:
      application/json:
        schema:
          allOf:
            - $ref: "../../shared/steer.yaml#/components/schemas/SteerCompletionRequest"
            - type: object
              description: Request for steering instruct models in a chat format
              required:
                - steer_special_tokens
                - prompt
              properties:
                is_assistant_axis:
                  type: boolean
                  default: false
                steer_special_tokens:
                  type: boolean
                  default: true
                prompt:
                  type: array
                  items:
                    $ref: "../../shared/steer.yaml#/components/schemas/NPSteerChatMessage"
                  description: Array of chat messages to pass to the model
  responses:
    "200":
      description: Successfully retrieved results
      content:
        application/json:
          schema:
            type: object
            description: The steering/default chat responses.
            required:
              - outputs
              - input
            properties:
              assistant_axis:
                type: array
                description: Persona monitoring data for assistant turns, one entry per steer type
                items:
                  type: object
                  properties:
                    type:
                      $ref: "../../shared/steer.yaml#/components/schemas/NPSteerType"
                      description: The steer type this axis data corresponds to
                    pc_titles:
                      type: array
                      items:
                        type: string
                      description: List of principal component titles/descriptions
                    turns:
                      type: array
                      items:
                        type: object
                        properties:
                          pc_values:
                            type: object
                            additionalProperties:
                              type: number
                            description: Dict mapping PC title to projection value
                          snippet:
                            type: string
                            description: Truncated conversation content for this turn
              outputs:
                type: array
                items:
                  $ref: "../../shared/steer.yaml#/components/schemas/NPSteerChatResult"
              input:
                $ref: "../../shared/steer.yaml#/components/schemas/NPSteerChatResult"
    401:
      $ref: "../../../shared.yaml#/components/responses/UnauthorizedError"
